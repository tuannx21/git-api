!function i(a,c,u){function l(t,e){if(!c[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(s)return s(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=c[t]={exports:{}};a[t][0].call(o.exports,function(e){return l(a[t][1][e]||e)},o,o.exports,i,a,c,u)}return c[t].exports}for(var s="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,r){"use strict";var a=e("./promiseAPI"),o="git-access-key",i=document.querySelector("#input-access-key"),c=document.querySelector("#userAvatar"),u=document.querySelector("#userName"),l=document.querySelector("#userEmail"),s=document.querySelector("#repoList"),d=function(){s.innerHTML=null,l.innerHTML=null,u.innerHTML=null,c.src=null},n=function(){i.addEventListener("keypress",function(e){if(13===e.which||13===e.keyCode){d();var t=i.value;r=o,n=t,window.localStorage.setItem(r,JSON.stringify(n)),h(t),i.value=""}var r,n})},h=function(e){d();var t,r=void 0===e?(t=o,JSON.parse(window.localStorage.getItem(t))).toString():e;(0,a.getUser)(r).then(function(e){var t,r,n,o,i;r=(t=e).name,n=t.login,o=t.email,i=t.avatar_url,c.src=i,u.innerHTML=r||n,l.innerHTML=o}),(0,a.getAllRepos)(r).then(function(e){var i;i=r,e.map(function(t){var e=document.querySelector("#repo-template").content.cloneNode(!0),r=e.querySelector("li"),n=r.querySelector("#repoName"),o=r.querySelector("#btnRemoveRepo");r.id=t.id,n.value=t.name,n.addEventListener("dblclick",function(){this.readOnly=!1}),n.addEventListener("keypress",function(e){13!==e.which&&13!==e.keyCode||(this.readOnly=!0,(0,a.renameRepo)(i,t.owner.login,t.name,this.value).then(alert("U have edited success, it may take a while to completely rename")))}),o.addEventListener("click",function(){!0===confirm("you sure you want to delete repo ".concat(t.name," ?????"))&&((0,a.deleteRepo)(i,t.owner.login,t.name),h())}),s.appendChild(e)})})};h(),n()},{"./promiseAPI":2}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deleteRepo=r.createRepo=r.renameRepo=r.getAllRepos=r.getUser=r.callAPI=void 0;r.callAPI=function(e,t,r){return fetch("https://api.github.com/".concat(e),{method:t,headers:{Authorization:"Bearer cae334db7b05a0aa274dc562a81e698d53673d5f"},body:null==r?null:JSON.stringify(r)}).then(function(e){return e.json()})};r.getUser=function(e){return fetch("https://api.github.com/user",{headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){return e.json()})};r.getAllRepos=function(e){return fetch("https://api.github.com/user/repos",{headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){return e.json()})};r.renameRepo=function(e,t,r,n){return fetch("https://api.github.com/repos/".concat(t,"/").concat(r),{method:"PATCH",headers:{Authorization:"Bearer ".concat(e)},body:JSON.stringify({name:n})})};r.createRepo=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{name:"Repo-create-by-api"};return fetch("https://api.github.com/user/repos",{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)})};r.deleteRepo=function(e,t,r){return fetch("https://api.github.com/repos/".concat(t,"/").concat(r),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}}).then(alert("done but it will take a while to completely delete on github")).catch(function(e){alert("errorrrrrr")})}},{}]},{},[1]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1bmRsZS5taW4uanMiXSwibmFtZXMiOlsiciIsImUiLCJuIiwidCIsIm8iLCJpIiwiZiIsImMiLCJyZXF1aXJlIiwidSIsImEiLCJFcnJvciIsImNvZGUiLCJwIiwiZXhwb3J0cyIsImNhbGwiLCJsZW5ndGgiLCIxIiwibW9kdWxlIiwiX3Byb21pc2VBUEkiLCJsYWJlbEFjY2Vzc0tleSIsImlucHV0QWNjZXNzS2V5IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW1nVXNlckF2YXRhciIsInVzZXJOYW1lIiwidXNlckVtYWlsIiwicmVwb3NMaXN0IiwiY2xlYXJBbGwiLCJpbm5lckhUTUwiLCJzcmMiLCJvbktleVByZXNzQWNjZXNzS2V5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwid2hpY2giLCJrZXlDb2RlIiwiYWNjZXNzS2V5IiwidmFsdWUiLCJsYWJlbCIsIml0ZW0iLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvYWREYXRhIiwia2V5IiwidW5kZWZpbmVkIiwicGFyc2UiLCJnZXRJdGVtIiwidG9TdHJpbmciLCJnZXRVc2VyIiwidGhlbiIsInVzZXIiLCJfcmVmIiwibmFtZSIsImxvZ2luIiwiZW1haWwiLCJhdmF0YXJfdXJsIiwiZ2V0QWxsUmVwb3MiLCJyZXBvcyIsIm1hcCIsInJlcG8iLCJjbG9uZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJyZXBvSXRlbSIsImlucHV0UmVwbyIsInJlbW92ZVJlcG8iLCJpZCIsInRoaXMiLCJyZWFkT25seSIsInJlbmFtZVJlcG8iLCJvd25lciIsImFsZXJ0IiwiY29uZmlybSIsImNvbmNhdCIsImRlbGV0ZVJlcG8iLCJhcHBlbmRDaGlsZCIsIi4vcHJvbWlzZUFQSSIsIjIiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNyZWF0ZVJlcG8iLCJjYWxsQVBJIiwiZW5kcG9pbnQiLCJtZXRob2QiLCJib2R5IiwiZmV0Y2giLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsInJlc3BvbnNlIiwianNvbiIsIm9sZE5hbWUiLCJuZXdOYW1lIiwibmV3UmVwbyIsImFyZ3VtZW50cyIsInJlcG9OYW1lIiwiY2F0Y2giLCJlcnJvciJdLCJtYXBwaW5ncyI6IkNBQVksU0FBU0EsRUFBRUMsRUFBRUMsRUFBRUMsR0FBRyxTQUFTQyxFQUFFQyxFQUFFQyxHQUFHLElBQUlKLEVBQUVHLEdBQUcsQ0FBQyxJQUFJSixFQUFFSSxHQUFHLENBQUMsSUFBSUUsRUFBRSxtQkFBbUJDLFNBQVNBLFFBQVEsSUFBSUYsR0FBR0MsRUFBRSxPQUFPQSxFQUFFRixHQUFFLEdBQUksR0FBR0ksRUFBRSxPQUFPQSxFQUFFSixHQUFFLEdBQUksSUFBSUssRUFBRSxJQUFJQyxNQUFNLHVCQUF1Qk4sRUFBRSxLQUFLLE1BQU1LLEVBQUVFLEtBQUssbUJBQW1CRixFQUFFLElBQUlHLEVBQUVYLEVBQUVHLEdBQUcsQ0FBQ1MsUUFBUSxJQUFJYixFQUFFSSxHQUFHLEdBQUdVLEtBQUtGLEVBQUVDLFFBQVEsU0FBU2QsR0FBb0IsT0FBT0ksRUFBbEJILEVBQUVJLEdBQUcsR0FBR0wsSUFBZUEsSUFBSWEsRUFBRUEsRUFBRUMsUUFBUWQsRUFBRUMsRUFBRUMsRUFBRUMsR0FBRyxPQUFPRCxFQUFFRyxHQUFHUyxRQUFRLElBQUksSUFBSUwsRUFBRSxtQkFBbUJELFNBQVNBLFFBQVFILEVBQUUsRUFBRUEsRUFBRUYsRUFBRWEsT0FBT1gsSUFBSUQsRUFBRUQsRUFBRUUsSUFBSSxPQUFPRCxFQUE3YixDQUE0YyxDQUFDYSxFQUFFLENBQUMsU0FBU1QsRUFBUVUsRUFBT0osR0FDeGUsYUFFQSxJQUFJSyxFQUFjWCxFQUFRLGdCQUV0QlksRUFBaUIsaUJBQ2pCQyxFQUFpQkMsU0FBU0MsY0FBYyxxQkFDeENDLEVBQWdCRixTQUFTQyxjQUFjLGVBQ3ZDRSxFQUFXSCxTQUFTQyxjQUFjLGFBQ2xDRyxFQUFZSixTQUFTQyxjQUFjLGNBQ25DSSxFQUFZTCxTQUFTQyxjQUFjLGFBa0RuQ0ss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Q0MsUUFBUyxDQUNQQyxjQUFpQixVQUFVZCxPQUFPeEMsTUFFbkNnQixLQUFLLFNBQVV1QyxHQUNoQixPQUFPQSxFQUFTQyxVQWdCcEI5RSxFQUFRNkMsWUFWVSxTQUFxQnZCLEdBQ3JDLE9BQU9vRCxNQUFNLG9DQUFxQyxDQUNoREMsUUFBUyxDQUNQQyxjQUFpQixVQUFVZCxPQUFPeEMsTUFFbkNnQixLQUFLLFNBQVV1QyxHQUNoQixPQUFPQSxFQUFTQyxVQWtCcEI5RSxFQUFRMEQsV0FaUyxTQUFvQnBDLEVBQVdxQyxFQUFPb0IsRUFBU0MsR0FDOUQsT0FBT04sTUFBTSxnQ0FBZ0NaLE9BQU9ILEVBQU8sS0FBS0csT0FBT2lCLEdBQVUsQ0FDL0VQLE9BQVEsUUFDUkcsUUFBUyxDQUNQQyxjQUFpQixVQUFVZCxPQUFPeEMsSUFFcENtRCxLQUFNNUMsS0FBS0MsVUFBVSxDQUNuQlcsS0FBTXVDLE9Bb0JaaEYsRUFBUXFFLFdBYlMsU0FBb0IvQyxHQUNuQyxJQUFJMkQsRUFBNkIsRUFBbkJDLFVBQVVoRixhQUErQitCLElBQWpCaUQsVUFBVSxHQUFtQkEsVUFBVSxHQUFLLENBQ2hGekMsS0FBTSxzQkFFUixPQUFPaUMsTUFBTSxvQ0FBcUMsQ0FDaERGLE9BQVEsT0FDUkcsUUFBUyxDQUNQQyxjQUFpQixVQUFVZCxPQUFPeEMsSUFFcENtRCxLQUFNNUMsS0FBS0MsVUFBVW1ELE1BaUJ6QmpGLEVBQVErRCxXQVhTLFNBQW9CekMsRUFBV3FDLEVBQU93QixHQUNyRCxPQUFPVCxNQUFNLGdDQUFnQ1osT0FBT0gsRUFBTyxLQUFLRyxPQUFPcUIsR0FBVyxDQUNoRlgsT0FBUSxTQUNSRyxRQUFTLENBQ1BDLGNBQWlCLFVBQVVkLE9BQU94QyxNQUVuQ2dCLEtBQUtzQixNQUFNLGlFQUFpRXdCLE1BQU0sU0FBVUMsR0FDN0Z6QixNQUFNLGtCQU1SLEtBQUssR0FBRyxDQUFDIiwiZmlsZSI6ImJ1bmRsZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcblwidXNlIHN0cmljdFwiO1xuXG52YXIgX3Byb21pc2VBUEkgPSByZXF1aXJlKFwiLi9wcm9taXNlQVBJXCIpO1xuXG52YXIgbGFiZWxBY2Nlc3NLZXkgPSAnZ2l0LWFjY2Vzcy1rZXknO1xudmFyIGlucHV0QWNjZXNzS2V5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2lucHV0LWFjY2Vzcy1rZXknKTtcbnZhciBpbWdVc2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXJBdmF0YXInKTtcbnZhciB1c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VyTmFtZScpO1xudmFyIHVzZXJFbWFpbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VyRW1haWwnKTtcbnZhciByZXBvc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVwb0xpc3QnKTsgLy9EaXNwbGF5aW5nIEFwcFxuXG52YXIgc2hvd1VzZXJJbmYgPSBmdW5jdGlvbiBzaG93VXNlckluZihfcmVmKSB7XG4gIHZhciBuYW1lID0gX3JlZi5uYW1lLFxuICAgICAgbG9naW4gPSBfcmVmLmxvZ2luLFxuICAgICAgZW1haWwgPSBfcmVmLmVtYWlsLFxuICAgICAgYXZhdGFyX3VybCA9IF9yZWYuYXZhdGFyX3VybDtcbiAgaW1nVXNlckF2YXRhci5zcmMgPSBhdmF0YXJfdXJsO1xuICB1c2VyTmFtZS5pbm5lckhUTUwgPSBuYW1lIHx8IGxvZ2luO1xuICB1c2VyRW1haWwuaW5uZXJIVE1MID0gZW1haWw7XG59O1xuXG52YXIgc2hvd1JlcG9zID0gZnVuY3Rpb24gc2hvd1JlcG9zKHJlcG9zLCBhY2Nlc3NLZXkpIHtcbiAgcmVwb3MubWFwKGZ1bmN0aW9uIChyZXBvKSB7XG4gICAgdmFyIHRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JlcG8tdGVtcGxhdGUnKTtcbiAgICB2YXIgY2xvbmUgPSB0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICB2YXIgcmVwb0l0ZW0gPSBjbG9uZS5xdWVyeVNlbGVjdG9yKCdsaScpO1xuICAgIHZhciBpbnB1dFJlcG8gPSByZXBvSXRlbS5xdWVyeVNlbGVjdG9yKCcjcmVwb05hbWUnKTtcbiAgICB2YXIgcmVtb3ZlUmVwbyA9IHJlcG9JdGVtLnF1ZXJ5U2VsZWN0b3IoJyNidG5SZW1vdmVSZXBvJyk7XG4gICAgcmVwb0l0ZW0uaWQgPSByZXBvLmlkO1xuICAgIGlucHV0UmVwby52YWx1ZSA9IHJlcG8ubmFtZTtcbiAgICBpbnB1dFJlcG8uYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnJlYWRPbmx5ID0gZmFsc2U7XG4gICAgfSk7XG4gICAgaW5wdXRSZXBvLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEzIHx8IGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XG4gICAgICAgIHRoaXMucmVhZE9ubHkgPSB0cnVlO1xuICAgICAgICAoMCwgX3Byb21pc2VBUEkucmVuYW1lUmVwbykoYWNjZXNzS2V5LCByZXBvLm93bmVyLmxvZ2luLCByZXBvLm5hbWUsIHRoaXMudmFsdWUpLnRoZW4oYWxlcnQoJ1UgaGF2ZSBlZGl0ZWQgc3VjY2VzcywgaXQgbWF5IHRha2UgYSB3aGlsZSB0byBjb21wbGV0ZWx5IHJlbmFtZScpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZW1vdmVSZXBvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNvbmZpcm1EZWxldGVCb3ggPSBjb25maXJtKFwieW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHJlcG8gXCIuY29uY2F0KHJlcG8ubmFtZSwgXCIgPz8/Pz9cIikpO1xuXG4gICAgICBpZiAoY29uZmlybURlbGV0ZUJveCA9PT0gdHJ1ZSkge1xuICAgICAgICAoMCwgX3Byb21pc2VBUEkuZGVsZXRlUmVwbykoYWNjZXNzS2V5LCByZXBvLm93bmVyLmxvZ2luLCByZXBvLm5hbWUpO1xuICAgICAgICBsb2FkRGF0YSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJlcG9zTGlzdC5hcHBlbmRDaGlsZChjbG9uZSk7XG4gIH0pO1xufTsgLy9QdXJlIEZ1bmN0aW9uXG5cblxudmFyIGZpbHRlckJ5T3duZXIgPSBmdW5jdGlvbiBmaWx0ZXJCeU93bmVyKHJlcG9zKSB7XG4gIHJldHVybiByZXBvcy5maWx0ZXIoZnVuY3Rpb24gKHJlcG8pIHtcbiAgICByZXR1cm4gcmVwby5vd25lci5sb2dpbiA9PT0gdXNlcnMubG9naW47XG4gIH0pO1xufTsgLy9VdGlsXG5cblxudmFyIGNsZWFyQWxsID0gZnVuY3Rpb24gY2xlYXJBbGwoKSB7XG4gIHJlcG9zTGlzdC5pbm5lckhUTUwgPSBudWxsO1xuICB1c2VyRW1haWwuaW5uZXJIVE1MID0gbnVsbDtcbiAgdXNlck5hbWUuaW5uZXJIVE1MID0gbnVsbDtcbiAgaW1nVXNlckF2YXRhci5zcmMgPSBudWxsO1xufTtcblxudmFyIHNhdmVUb0xvY2FsU3RvcmFnZSA9IGZ1bmN0aW9uIHNhdmVUb0xvY2FsU3RvcmFnZShsYWJlbCwgaXRlbSkge1xuICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0obGFiZWwsIEpTT04uc3RyaW5naWZ5KGl0ZW0pKTtcbn07XG5cbnZhciBnZXRJdGVtRnJvbUxvY2FsU3RvcmFnZSA9IGZ1bmN0aW9uIGdldEl0ZW1Gcm9tTG9jYWxTdG9yYWdlKGxhYmVsKSB7XG4gIHJldHVybiBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShsYWJlbCkpO1xufTtcblxudmFyIG9uS2V5UHJlc3NBY2Nlc3NLZXkgPSBmdW5jdGlvbiBvbktleVByZXNzQWNjZXNzS2V5KCkge1xuICBpbnB1dEFjY2Vzc0tleS5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChldmVudC53aGljaCA9PT0gMTMgfHwgZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgIGNsZWFyQWxsKCk7XG4gICAgICB2YXIgYWNjZXNzS2V5ID0gaW5wdXRBY2Nlc3NLZXkudmFsdWU7XG4gICAgICBzYXZlVG9Mb2NhbFN0b3JhZ2UobGFiZWxBY2Nlc3NLZXksIGFjY2Vzc0tleSk7XG4gICAgICBsb2FkRGF0YShhY2Nlc3NLZXkpO1xuICAgICAgaW5wdXRBY2Nlc3NLZXkudmFsdWUgPSAnJztcbiAgICB9XG4gIH0pO1xufTtcblxudmFyIGxvYWREYXRhID0gZnVuY3Rpb24gbG9hZERhdGEoYWNjZXNzS2V5KSB7XG4gIGNsZWFyQWxsKCk7XG4gIHZhciBrZXkgPSBhY2Nlc3NLZXkgPT09IHVuZGVmaW5lZCA/IGdldEl0ZW1Gcm9tTG9jYWxTdG9yYWdlKGxhYmVsQWNjZXNzS2V5KS50b1N0cmluZygpIDogYWNjZXNzS2V5O1xuICAoMCwgX3Byb21pc2VBUEkuZ2V0VXNlcikoa2V5KS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgc2hvd1VzZXJJbmYodXNlcik7XG4gIH0pO1xuICAoMCwgX3Byb21pc2VBUEkuZ2V0QWxsUmVwb3MpKGtleSkudGhlbihmdW5jdGlvbiAocmVwb3MpIHtcbiAgICBzaG93UmVwb3MocmVwb3MsIGtleSk7XG4gIH0pO1xufTtcblxudmFyIEFwcCA9IGZ1bmN0aW9uIEFwcCgpIHtcbiAgbG9hZERhdGEoKTtcbiAgb25LZXlQcmVzc0FjY2Vzc0tleSgpO1xufTsgLy9zdGFydCBBcHBcblxuXG5BcHAoKTtcblxufSx7XCIuL3Byb21pc2VBUElcIjoyfV0sMjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7XG5cInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVsZXRlUmVwbyA9IGV4cG9ydHMuY3JlYXRlUmVwbyA9IGV4cG9ydHMucmVuYW1lUmVwbyA9IGV4cG9ydHMuZ2V0QWxsUmVwb3MgPSBleHBvcnRzLmdldFVzZXIgPSBleHBvcnRzLmNhbGxBUEkgPSB2b2lkIDA7XG5cbi8vUHJvbWlzZVxudmFyIGNhbGxBUEkgPSBmdW5jdGlvbiBjYWxsQVBJKGVuZHBvaW50LCBtZXRob2QsIGJvZHkpIHtcbiAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9cIi5jb25jYXQoZW5kcG9pbnQpLCB7XG4gICAgbWV0aG9kOiBtZXRob2QsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ0F1dGhvcml6YXRpb24nOiBcIkJlYXJlciBjYWUzMzRkYjdiMDVhMGFhMjc0ZGM1NjJhODFlNjk4ZDUzNjczZDVmXCJcbiAgICB9LFxuICAgIGJvZHk6IGJvZHkgPT09IHVuZGVmaW5lZCB8fCBib2R5ID09PSBudWxsID8gbnVsbCA6IEpTT04uc3RyaW5naWZ5KGJvZHkpXG4gIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgfSk7XG59O1xuXG5leHBvcnRzLmNhbGxBUEkgPSBjYWxsQVBJO1xuXG52YXIgZ2V0VXNlciA9IGZ1bmN0aW9uIGdldFVzZXIoYWNjZXNzS2V5KSB7XG4gIHJldHVybiBmZXRjaCgnaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS91c2VyJywge1xuICAgIGhlYWRlcnM6IHtcbiAgICAgICdBdXRob3JpemF0aW9uJzogXCJCZWFyZXIgXCIuY29uY2F0KGFjY2Vzc0tleSlcbiAgICB9XG4gIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgfSk7XG59O1xuXG5leHBvcnRzLmdldFVzZXIgPSBnZXRVc2VyO1xuXG52YXIgZ2V0QWxsUmVwb3MgPSBmdW5jdGlvbiBnZXRBbGxSZXBvcyhhY2Nlc3NLZXkpIHtcbiAgcmV0dXJuIGZldGNoKCdodHRwczovL2FwaS5naXRodWIuY29tL3VzZXIvcmVwb3MnLCB7XG4gICAgaGVhZGVyczoge1xuICAgICAgJ0F1dGhvcml6YXRpb24nOiBcIkJlYXJlciBcIi5jb25jYXQoYWNjZXNzS2V5KVxuICAgIH1cbiAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICB9KTtcbn07XG5cbmV4cG9ydHMuZ2V0QWxsUmVwb3MgPSBnZXRBbGxSZXBvcztcblxudmFyIHJlbmFtZVJlcG8gPSBmdW5jdGlvbiByZW5hbWVSZXBvKGFjY2Vzc0tleSwgb3duZXIsIG9sZE5hbWUsIG5ld05hbWUpIHtcbiAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9cIi5jb25jYXQob3duZXIsIFwiL1wiKS5jb25jYXQob2xkTmFtZSksIHtcbiAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ0F1dGhvcml6YXRpb24nOiBcIkJlYXJlciBcIi5jb25jYXQoYWNjZXNzS2V5KVxuICAgIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgbmFtZTogbmV3TmFtZVxuICAgIH0pXG4gIH0pO1xufTtcblxuZXhwb3J0cy5yZW5hbWVSZXBvID0gcmVuYW1lUmVwbztcblxudmFyIGNyZWF0ZVJlcG8gPSBmdW5jdGlvbiBjcmVhdGVSZXBvKGFjY2Vzc0tleSkge1xuICB2YXIgbmV3UmVwbyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge1xuICAgIG5hbWU6ICdSZXBvLWNyZWF0ZS1ieS1hcGknXG4gIH07XG4gIHJldHVybiBmZXRjaChcImh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vdXNlci9yZXBvc1wiLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczoge1xuICAgICAgJ0F1dGhvcml6YXRpb24nOiBcIkJlYXJlciBcIi5jb25jYXQoYWNjZXNzS2V5KVxuICAgIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkobmV3UmVwbylcbiAgfSk7XG59O1xuXG5leHBvcnRzLmNyZWF0ZVJlcG8gPSBjcmVhdGVSZXBvO1xuXG52YXIgZGVsZXRlUmVwbyA9IGZ1bmN0aW9uIGRlbGV0ZVJlcG8oYWNjZXNzS2V5LCBvd25lciwgcmVwb05hbWUpIHtcbiAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9cIi5jb25jYXQob3duZXIsIFwiL1wiKS5jb25jYXQocmVwb05hbWUpLCB7XG4gICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnQXV0aG9yaXphdGlvbic6IFwiQmVhcmVyIFwiLmNvbmNhdChhY2Nlc3NLZXkpXG4gICAgfVxuICB9KS50aGVuKGFsZXJ0KCdkb25lIGJ1dCBpdCB3aWxsIHRha2UgYSB3aGlsZSB0byBjb21wbGV0ZWx5IGRlbGV0ZSBvbiBnaXRodWInKSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgYWxlcnQoXCJlcnJvcnJycnJyXCIpO1xuICB9KTtcbn07XG5cbmV4cG9ydHMuZGVsZXRlUmVwbyA9IGRlbGV0ZVJlcG87XG5cbn0se31dfSx7fSxbMV0pO1xuIl19
